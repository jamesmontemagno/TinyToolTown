# Copilot Instructions — Tiny Tool Town

## Project Overview

Tiny Tool Town is a community-driven directory website for free, open-source tiny tools, built with [Astro](https://astro.build) and deployed as a static site to GitHub Pages. Tools are submitted via GitHub Issues (or a CLI submitter), automatically converted to markdown content files, and rendered into the site.

## Build & Run

```bash
npm install
npm run dev        # Local dev server
npm run build      # Production build (outputs to dist/)
npm run preview    # Preview production build locally
```

There are no tests or linters configured for the Astro site.

### .NET Tools

Two .NET CLI tools live in `tools/`:

```bash
# TinyToolSummarizer — generates AI summaries for tool pages
cd tools/TinyToolSummarizer && dotnet run

# TinyToolSubmitter — CLI for submitting tools via GitHub Issues
cd tools/TinyToolSubmitter && dotnet run -- [path-to-repo]
```

Both require .NET 10 SDK and GitHub Copilot CLI on PATH.

## Architecture

- **Content-driven static site**: Tools are Astro content collections. Each tool is a markdown file in `src/content/tools/` with YAML frontmatter. The schema is defined in `src/content/config.ts` using Zod.
- **Submission pipeline**: Users submit via GitHub Issue → a maintainer labels it `approved` → the `approve-tool.yml` workflow parses the issue, creates the `.md` file, downloads a thumbnail, commits, and triggers a deploy.
- **Thumbnails**: Stored in `public/thumbnails/`. The approval workflow and `scripts/fetch-thumbnails.mjs` both extract the largest non-badge image from a tool's README.
- **AI summaries**: The `TinyToolSummarizer` tool reads each tool's README via GitHub API, sends it to the Copilot SDK, and writes `ai_summary` and `ai_features` fields into the frontmatter. These render on detail pages in a purple "Copilot says" card.

## Key Conventions

### Tool Markdown Files (`src/content/tools/*.md`)

Every tool file follows this frontmatter schema (see `src/content/config.ts`):

```yaml
---
name: "Tool Name"
tagline: "One-line description"
author: "Author Name"
author_github: "github-username"
github_url: "https://github.com/owner/repo"
website_url: "https://optional.com"        # optional
thumbnail: "/thumbnails/tool-name.png"     # optional
tags: ["cli", "fun"]                       # max 5, lowercase
language: "Python"                         # optional
license: "MIT"                             # optional
date_added: "2026-02-09"
featured: false
ai_summary: "..."                          # optional, generated by TinyToolSummarizer
ai_features: ["...", "..."]                # optional, generated by TinyToolSummarizer
---

Description in markdown body.
```

- The filename (slug) is derived from the tool name: lowercase, alphanumeric + hyphens only.
- Tags go through synonym normalization (e.g., `devtools` → `developer-tools`) and language names are excluded from tags.
- `ai_summary` and `ai_features` should not be manually written; they are generated by the summarizer tool.

### Astro Components

- All pages use `BaseLayout.astro` and include `Header.astro` / `Footer.astro`.
- Styles are scoped per-component using `<style>` blocks (Astro's default). Global styles are in `src/styles/global.css`.
- CSS uses custom properties prefixed `--color-*` and `--radius*` defined in global.css.
- The `langColors` record mapping language names to dot colors is duplicated in `ToolCard.astro` and `[slug].astro` — keep them in sync.

### GitHub Actions Workflows

- `deploy.yml` — Builds and deploys to GitHub Pages on push to `main`.
- `approve-tool.yml` — Triggered when an issue is labeled `approved`. Parses the issue form, creates the tool `.md` file, downloads a thumbnail, and commits directly to `main`.
- `generate-summaries.yml` — Runs TinyToolSummarizer for AI content.
- `refresh-thumbnails.yml` — Re-fetches thumbnails from READMEs.
- `batch-approve.yml` — Bulk-approves queued tool submissions.
